{
  "$jsonSchema": {
    "bsonType": "object",
    "required": ["name", "duration", "weeks"],
    "properties": {
      "_id": {
        "bsonType": "objectId",
        "description": "must be an objectId and is required"
      },
      "name": {
        "bsonType": "string",
        "description": "name of the workout plan and is required"
      },
      "duration": {
        "bsonType": "int",
        "minimum": 1,
        "description": "duration of the workout plan in weeks and is required"
      },
      "weeks": {
        "bsonType": "array",
        "minItems": 1,
        "items": {
          "bsonType": "object",
          "required": ["days", "weekNumber"],
          "properties": {
            "weekNumber": {
              "bsonType": "int",
              "minimum": 1
            },
            "days": {
              "bsonType": "array",
              "minItems": 1,
              "items": {
                "bsonType": "object",
                "required": [
                  "warmUp",
                  "workout",
                  "coolDown",
                  "workoutTimeRange"
                ],
                "properties": {
                  "warmUp": {
                    "bsonType": "array",
                    "minItems": 1,
                    "items": {
                      "bsonType": "object",
                      "required": ["exerciseIds", "proposedLaps"],
                      "properties": {
                        "exerciseIds": {
                          "bsonType": "array",
                          "minItems": 1,
                          "items": {
                            "bsonType": "objectId"
                          }
                        },
                        "restTime": {
                          "bsonType": "int",
                          "minimum": 5,
                          "maximum": 240
                        },
                        "proposedLaps": {
                          "bsonType": "int",
                          "minimum": 1
                        }
                      }
                    }
                  },
                  "workout": {
                    "bsonType": "array",
                    "minItems": 1,
                    "items": {
                      "bsonType": "object",
                      "required": ["exerciseIds", "proposedLaps"],
                      "properties": {
                        "exerciseIds": {
                          "bsonType": "array",
                          "minItems": 1,
                          "items": {
                            "bsonType": "objectId"
                          }
                        },
                        "restTime": {
                          "bsonType": "int",
                          "minimum": 5,
                          "maximum": 240
                        },
                        "proposedLaps": {
                          "bsonType": "int",
                          "minimum": 1
                        }
                      }
                    }
                  },
                  "coolDown": {
                    "bsonType": "array",
                    "minItems": 1,
                    "items": {
                      "bsonType": "object",
                      "required": ["exerciseIds", "proposedLaps"],
                      "properties": {
                        "exerciseIds": {
                          "bsonType": "array",
                          "minItems": 1,
                          "items": {
                            "bsonType": "objectId"
                          }
                        },
                        "restTime": {
                          "bsonType": "int",
                          "minimum": 5,
                          "maximum": 240
                        },
                        "proposedLaps": {
                          "bsonType": "int",
                          "minimum": 1
                        }
                      }
                    }
                  },
                  "workoutTimeRange": {
                    "bsonType": "array",
                    "items": {
                      "bsonType": "int"
                    },
                    "minItems": 2,
                    "maxItems": 2,
                    "description": "workout time range in seconds [minTime, maxTime]"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
